{
  "module": "api",
  "version": "1.0.0",
  "layer": "presentation",
  "description": "HTTP API endpoints for todo application",
  
  "exports": {
    "TodoController": {
      "type": "class",
      "methods": {
        "createTodo": {
          "inputs": [
            {"name": "request", "type": "CreateTodoRequest"},
            {"name": "user", "type": "user.User"}
          ],
          "returns": {
            "type": "Promise",
            "inner": "TodoResponse"
          },
          "throws": [
            "ValidationError",
            "UnauthorizedError"
          ],
          "calls": [
            "todo.TodoService.createTodo"
          ],
          "effects": ["database.write"]
        },
        "getTodo": {
          "inputs": [
            {"name": "todoId", "type": "string"},
            {"name": "user", "type": "user.User"}
          ],
          "returns": {
            "type": "Promise",
            "inner": "TodoResponse"
          },
          "throws": [
            "TodoNotFoundError",
            "UnauthorizedError"
          ],
          "calls": [
            "todo.TodoService.getTodo"
          ],
          "effects": ["database.read"]
        },
        "listTodos": {
          "inputs": [
            {"name": "query", "type": "ListTodosQuery"},
            {"name": "user", "type": "user.User"}
          ],
          "returns": {
            "type": "Promise",
            "inner": "TodoListResponse"
          },
          "throws": ["UnauthorizedError"],
          "calls": [
            "todo.TodoService.listTodos"
          ],
          "effects": ["database.read"]
        },
        "updateTodo": {
          "inputs": [
            {"name": "todoId", "type": "string"},
            {"name": "request", "type": "UpdateTodoRequest"},
            {"name": "user", "type": "user.User"}
          ],
          "returns": {
            "type": "Promise",
            "inner": "TodoResponse"
          },
          "throws": [
            "TodoNotFoundError",
            "ValidationError",
            "UnauthorizedError"
          ],
          "calls": [
            "todo.TodoService.updateTodo"
          ],
          "effects": ["database.write"]
        },
        "deleteTodo": {
          "inputs": [
            {"name": "todoId", "type": "string"},
            {"name": "user", "type": "user.User"}
          ],
          "returns": {
            "type": "Promise",
            "inner": "void"
          },
          "throws": [
            "TodoNotFoundError",
            "UnauthorizedError"
          ],
          "calls": [
            "todo.TodoService.deleteTodo"
          ],
          "effects": ["database.write"]
        }
      },
      "dependencies": [
        {"module": "todo", "imports": ["TodoService"]},
        {"module": "user", "imports": ["User"]}
      ]
    },
    
    "AuthController": {
      "type": "class",
      "methods": {
        "login": {
          "inputs": [
            {"name": "request", "type": "LoginRequest"}
          ],
          "returns": {
            "type": "Promise",
            "inner": "AuthResponse"
          },
          "throws": [
            "InvalidCredentialsError",
            "ValidationError"
          ],
          "calls": [
            "auth.AuthService.login"
          ],
          "effects": ["database.read", "session.create"]
        },
        "register": {
          "inputs": [
            {"name": "request", "type": "RegisterRequest"}
          ],
          "returns": {
            "type": "Promise",
            "inner": "AuthResponse"
          },
          "throws": [
            "EmailAlreadyExistsError",
            "WeakPasswordError",
            "ValidationError"
          ],
          "calls": [
            "auth.AuthService.register"
          ],
          "effects": ["database.write", "database.read"]
        },
        "logout": {
          "inputs": [
            {"name": "token", "type": "string"}
          ],
          "returns": {
            "type": "Promise",
            "inner": "void"
          },
          "throws": ["SessionNotFoundError"],
          "calls": [
            "auth.AuthService.logout"
          ],
          "effects": ["session.delete"]
        }
      },
      "dependencies": [
        {"module": "auth", "imports": ["AuthService"]}
      ]
    },
    
    "CreateTodoRequest": {
      "type": "interface",
      "properties": {
        "title": {"type": "string", "required": true},
        "description": {"type": "string", "required": false}
      }
    },
    
    "UpdateTodoRequest": {
      "type": "interface",
      "properties": {
        "title": {"type": "string", "required": false},
        "description": {"type": "string", "required": false},
        "completed": {"type": "boolean", "required": false}
      }
    },
    
    "ListTodosQuery": {
      "type": "interface",
      "properties": {
        "completed": {"type": "boolean", "required": false},
        "search": {"type": "string", "required": false},
        "sortBy": {"type": "string", "required": false},
        "sortOrder": {"type": "string", "required": false},
        "limit": {"type": "number", "required": false},
        "offset": {"type": "number", "required": false}
      }
    },
    
    "TodoResponse": {
      "type": "interface",
      "properties": {
        "id": {"type": "string", "required": true},
        "title": {"type": "string", "required": true},
        "description": {"type": "string", "required": false},
        "completed": {"type": "boolean", "required": true},
        "createdAt": {"type": "string", "required": true},
        "updatedAt": {"type": "string", "required": true},
        "completedAt": {"type": "string", "required": false}
      }
    },
    
    "TodoListResponse": {
      "type": "interface",
      "properties": {
        "todos": {"type": "Array<TodoResponse>", "required": true},
        "total": {"type": "number", "required": true},
        "limit": {"type": "number", "required": true},
        "offset": {"type": "number", "required": true}
      }
    },
    
    "LoginRequest": {
      "type": "interface",
      "properties": {
        "email": {"type": "string", "required": true},
        "password": {"type": "string", "required": true}
      }
    },
    
    "RegisterRequest": {
      "type": "interface",
      "properties": {
        "email": {"type": "string", "required": true},
        "password": {"type": "string", "required": true},
        "name": {"type": "string", "required": true}
      }
    },
    
    "AuthResponse": {
      "type": "interface",
      "properties": {
        "token": {"type": "string", "required": true},
        "expiresAt": {"type": "string", "required": true},
        "user": {"type": "UserResponse", "required": true}
      }
    },
    
    "UserResponse": {
      "type": "interface",
      "properties": {
        "id": {"type": "string", "required": true},
        "email": {"type": "string", "required": true},
        "name": {"type": "string", "required": true},
        "createdAt": {"type": "string", "required": true}
      }
    }
  },
  
  "dependencies": {
    "todo": "^1.0.0",
    "auth": "^1.0.0",
    "user": "^1.0.0"
  }
}
